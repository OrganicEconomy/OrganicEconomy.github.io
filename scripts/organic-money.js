/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={4:(t,e,r)=>{e.setExtUnpackers=function(t){t.addExtUnpacker(14,[a,f(Error)]),t.addExtUnpacker(1,[a,f(EvalError)]),t.addExtUnpacker(2,[a,f(RangeError)]),t.addExtUnpacker(3,[a,f(ReferenceError)]),t.addExtUnpacker(4,[a,f(SyntaxError)]),t.addExtUnpacker(5,[a,f(TypeError)]),t.addExtUnpacker(6,[a,f(URIError)]),t.addExtUnpacker(10,[a,c]),t.addExtUnpacker(11,[a,u(Boolean)]),t.addExtUnpacker(12,[a,u(String)]),t.addExtUnpacker(13,[a,u(Date)]),t.addExtUnpacker(15,[a,u(Number)]),"undefined"!=typeof Uint8Array&&(t.addExtUnpacker(17,u(Int8Array)),t.addExtUnpacker(18,u(Uint8Array)),t.addExtUnpacker(19,[h,u(Int16Array)]),t.addExtUnpacker(20,[h,u(Uint16Array)]),t.addExtUnpacker(21,[h,u(Int32Array)]),t.addExtUnpacker(22,[h,u(Uint32Array)]),t.addExtUnpacker(23,[h,u(Float32Array)]),"undefined"!=typeof Float64Array&&t.addExtUnpacker(24,[h,u(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&t.addExtUnpacker(25,u(Uint8ClampedArray)),t.addExtUnpacker(26,h),t.addExtUnpacker(29,[h,u(DataView)])),i.hasBuffer&&t.addExtUnpacker(27,u(o))};var n,i=r(204),o=i.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(t){return n||(n=r(402).decode),n(t)}function c(t){return RegExp.apply(null,t)}function f(t){return function(e){var r=new t;for(var n in s)r[n]=e[n];return r}}function u(t){return function(e){return new t(e)}}function h(t){return new Uint8Array(t).buffer}},40:(t,e)=>{for(var r=e.h=new Array(256),n=0;n<=255;n++)r[n]=i(n);function i(t){return function(e){var r=e.reserve(1);e.buffer[r]=t}}},43:(t,e,r)=>{var n,i=r(179);e.copy=f,e.slice=u,e.toString=function(t,e,r){return(!a&&o.isBuffer(this)?this.toString:i.toString).apply(this,arguments)},e.write=(n="write",function(){return(this[n]||i[n]).apply(this,arguments)});var o=r(204),s=o.global,a=o.hasBuffer&&"TYPED_ARRAY_SUPPORT"in s,c=a&&!s.TYPED_ARRAY_SUPPORT;function f(t,e,r,n){var s=o.isBuffer(this),a=o.isBuffer(t);if(s&&a)return this.copy(t,e,r,n);if(c||s||a||!o.isView(this)||!o.isView(t))return i.copy.call(this,t,e,r,n);var f=r||null!=n?u.call(this,r,n):this;return t.set(f,e),f.length}function u(t,e){var r=this.slice||!c&&this.subarray;if(r)return r.call(this,t,e);var n=o.alloc.call(this,e-t);return f.call(this,n,0,t,e),n}},44:(t,e,r)=>{const{Base64:n}=r(127),{sha256:i}=r(314),{scryptSync:o}=r(446),{utf8ToBytes:s,toHex:a,hexToBytes:c}=r(672),f=r(513),{encrypt:u,decrypt:h}=r(658),{getRandomBytesSync:l}=r(754),d=r(830);class y extends Error{constructor(t){super(t),this.name="InvalidTransactionError"}}class p extends Error{constructor(t){super(t),this.name="UnauthorizedError"}}class g{static get REF_HASH(){return"c1a551ca1c0deea5efea51b1e1dea112ed1dea0a5150f5e11ab1e50c1a15eed5"}static get ECOREF_HASH(){return"ec051c1a551ca1c0deea5efea51b1e1dea112ed1dea0a5150f5e11ab1e50c1a1"}static get VERSION(){return 1}static get TXTYPE(){return{INIT:0,CREATE:1,PAY:2,ENGAGE:3,PAPER:4,SETADMIN:5,SETACTOR:6,SETPAYER:7}}static randomPrivateKey(){return a(f.utils.randomPrivateKey())}static async aesEncrypt(t,e){const r=o(s(e),s("salt"),2048,8,1,16),n=l(16);return{msg:t=await u(t,r,n),iv:n,sha:i(s(e))}}static async aesDecrypt(t,e){if(JSON.stringify(i(s(e)))!==JSON.stringify(t.sha))throw new Error("Invalid password");const r=o(s(e),s("salt"),2048,8,1,16);return await h(t.msg,r,t.iv)}static publicFromPrivate(t){return a(f.getPublicKey(t,!0))}static dateToInt(t){return+(""+t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2))}static intToDate(t){const e=""+t;return new Date(e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8))}static intToIndex(t){return+(""+t).slice(-3)}static formatMoneyIndex(t,e){return+(""+g.dateToInt(t)+("00"+e).slice(-3))}static formatInvestIndex(t,e){return+(g.dateToInt(t)+"9"+("00"+e).slice(-3))}static buildInvestIndexes(t,e){const r=[];for(let n=0;n<e;n++)r.push(g.formatInvestIndex(t,n));return r}static buildMoneyIndexes(t,e){const r=[];for(let n=0;n<e;n++)r.push(g.formatMoneyIndex(t,n));return r}static hashblock(t){const e={v:t.version,d:t.closedate,p:t.previousHash,s:t.signer,r:t.merkleroot,m:t.money,i:t.invests,t:t.total},r=d.encode(e);return i(r)}static hashtx(t){const e={d:t.date,m:t.money,i:t.invests,s:t.signer,t:t.type,p:t.target,v:t.version},r=d.encode(e);return i(r)}static signblock(t,e){const r=c(e),n=g.hashblock(t),i=f.signSync(n,r);return t.hash=a(i),t}static signtx(t,e){const r=c(e),n=g.hashtx(t),i=f.signSync(n,r);return t.hash=a(i),t}static isValidBlock(t,e=null){e=e||t.signer||t.source;const r=this.hashblock(t),n=t.hash;return f.verify(n,r,e)}static isValidBirthBlock(t){const e=t.hash,r=g.hashblock(t),n=t.signer;for(let e of t.transactions)if(!g.isValidTransaction(e))return!1;return t.previousHash===g.REF_HASH&&t.version===g.VERSION&&2===t.transactions.length&&0===t.merkleroot&&1===t.money.length&&1===t.invests.length&&0===t.total&&f.verify(e,r,n)}static isValidInitializationBlock(t){const e=t.hash,r=g.hashblock(t),n=t.signer;return t.version===g.VERSION&&0===t.transactions.length&&0===t.merkleroot&&0===t.money.length&&0===t.invests.length&&0===t.total&&f.verify(e,r,n)}static isValidTransaction(t){const e=g.hashtx(t);return!!t.source&&t.version===g.VERSION&&t.date>0&&66===t.source.length&&"[object Array]"==Object.prototype.toString.call(t.money)&&"[object Array]"==Object.prototype.toString.call(t.invests)&&Object.values(g.TXTYPE).indexOf(t.type)>-1&&f.verify(t.hash,e,t.source)}constructor(t=[]){null===t&&(t=[]),this.load(t)}get blocks(){return this.bks}set blocks(t){this.bks=t}get lastblock(){return this.bks[0]}addBlock(t){if(!this.isEmpty()&&!g.isValidBlock(this.lastblock))throw new p("Cannot add block if previous is not signed.");this.blocks.unshift(t)}cashPaper(t){if(0!==t.target)throw new y("Target is != 0");if(!t.version)throw new y("Missing version "+t.hash);if(!t.date>0)throw new y("Wrong date "+t.hash);if(!t.source||66!==t.source.length)throw new y("Wrong source format "+t.hash);if(!t.money||"[object Array]"==!Object.prototype.toString.call(t.money))throw new y("Wrong money format "+t.hash);if(0===t.money.length)throw new y("Empty paper (no money) "+t.hash);if(!t.invests||"[object Array]"==!Object.prototype.toString.call(t.invests)||t.invests.length>0)throw new y("Wrong invests format "+t.hash);if(t.type!==g.TXTYPE.PAPER)throw new y("Wrong transaction type "+t.hash);if(!g.isValidTransaction(t))throw new y("Wrong signature "+t.hash);return this.addTransaction(t),this.lastblock.total+=t.money.length,t}getAffordableInvestAmount(t){return this.getLevel()-this.getEngagedInvests(t).length}getAvailableMoneyAmount(){return this.isEmpty()||this.isWaitingValidation()?0:this.lastblock.money.length}getAvailableMoney(t=-1){return t<0?this.lastblock.money:t>this.lastblock.money.length?[]:this.lastblock.money.slice(0,t)}getEngagedInvests(t=null){const e=[];for(let r of this.lastblock.transactions)if(r.type===g.TXTYPE.ENGAGE)for(let n of r.invests)null!==t?g.intToDate(n).getDate()===t.getDate()&&e.push(n):e.push(n);return e}getEngagedMoney(t=null){const e=[];for(let r of this.lastblock.transactions)if(r.type===g.TXTYPE.ENGAGE)for(let n of r.money)null!==t?g.intToDate(n).getDate()===t.getDate()&&e.push(n):e.push(n);return e}getLastTransaction(){for(let t of this.blocks)if(t.transactions.length>0)return t.transactions[0];return null}getLastTransactionDate(){const t=this.getLastTransaction();return g.intToDate(t.date)}isEmpty(){return 0===this.blocks.length}isValid(){return!0}load(t){if("[object Array]"==Object.prototype.toString.call(t))this.blocks=t;else try{this.blocks=d.decode(t)}catch(e){const r=n.toUint8Array(t);this.blocks=d.decode(r)}if(0!==this.blocks.length&&!this.lastblock.version)for(let t=0;t<this.blocks.length;t++){this.blocks[t]={version:this.blocks[t].v,closedate:this.blocks[t].d,previousHash:this.blocks[t].p,signer:this.blocks[t].s,merkleroot:this.blocks[t].r,total:this.blocks[t].t,money:this.blocks[t].m,invests:this.blocks[t].i,transactions:[]||0,hash:this.blocks[t].h};for(let e=0;e<this.blocks[t].transactions;e++)this.blocks[t].transactions[e]={version:this.blocks[t].transaction[e].v,type:this.blocks[t].transaction[e].t,date:this.blocks[t].transaction[e].d,signer:this.blocks[t].transaction[e].s,target:this.blocks[t].transaction[e].t,money:this.blocks[t].transaction[e].m,invests:this.blocks[t].transaction[e].i}}}removeMoney(t){const e=this.lastblock.money.filter((e=>!t.includes(e)));return this.lastblock.money=e,e}addTransaction(t){this.lastblock.hash&&this.newBlock(),this.lastblock.transactions.unshift(t)}newBlock(){if(!g.isValidBlock(this.lastblock))throw new Error("Previous block not signed.");const t={closedate:null,version:g.VERSION,previousHash:this.lastblock.hash,money:this.lastblock.money,invests:this.lastblock.invests,total:this.lastblock.total,merkleroot:0,signer:null,transactions:[]},e=g.intToDate(this.lastblock.closedate);e.setDate(e.getDate()+1);for(let r of this.lastblock.transactions)if(r.type===g.TXTYPE.ENGAGE){for(let n of r.money)if(g.intToDate(n).getTime()===e.getTime()){t.transactions.push(r);break}for(let n of r.invests)if(g.intToDate(n).getTime()===e.getTime()){t.transactions.push(r);break}}this.blocks.unshift(t)}sealLastBlock(t){this.getMyPublicKey();for(let e of this.lastblock.transactions)if(e.type===g.TXTYPE.PAPER&&g.publicFromPrivate(t)!==e.signer)throw new p("Only Paper signer can seal a block with it.");return g.signblock(this.lastblock,t)}getHistory(){const t=[];return this.blocks.forEach((e=>{e.transactions&&e.transactions.forEach((e=>{t.push(e)}))})),t}getMyPublicKey(){for(let t of this.blocks){if(t.previousHash===g.REF_HASH)return t.signer;if(t.transactions.length>0)for(let e of t.transactions)if(e.type===g.TXTYPE.CREATE)return e.source}return null}income(t){const e=this.getMyPublicKey();if(t.target!==e||t.type!==g.TXTYPE.PAY||!g.isValidTransaction(t))throw new Error("Invalid transaction");return this.addTransaction(t),this.lastblock.total+=t.money.length,t}pay(t,e,r,n=new Date){const i=this.getAvailableMoney(r);if(0===i.length)throw new y("Unsufficient funds.");const o={type:g.TXTYPE.PAY,date:g.dateToInt(n),money:i,source:g.publicFromPrivate(t),invests:[],target:e,signer:0,version:g.VERSION},s=g.signtx(o,t);return this.addTransaction(s),this.removeMoney(i),s}}t.exports={Blockchain:g,CitizenBlockchain:class extends g{createMoneyAndInvests(t,e=new Date){var r=e;const n=new Date;if(e.getTime()>n.getTime())throw new Error("Cannot create futur money, live in the present.");const i=this.getLastCreationTransaction();if(i&&(r=g.intToDate(i.date)).setDate(r.getDate()+1),r>e)return null;const o=this.getLevel();let s,a,c,f,u=[],h=[];for(;r<=e;)a=g.buildInvestIndexes(r,o),c=a.filter((t=>!this.getEngagedInvests(r).includes(t))),h=h.concat(c),s=g.buildMoneyIndexes(r,o),f=s.filter((t=>!this.getEngagedMoney(r).includes(t))),u=u.concat(f),r.setDate(r.getDate()+1);const l={version:g.VERSION,type:g.TXTYPE.CREATE,date:g.dateToInt(e),source:g.publicFromPrivate(t),target:g.publicFromPrivate(t),signer:0,money:u,invests:h},d=g.signtx(l,t);return this.addTransaction(d),this.lastblock.money=this.lastblock.money.concat(u),this.lastblock.invests=this.lastblock.invests.concat(h),d}engageInvests(t,e,r,n,i=new Date){if(r>this.getAffordableInvestAmount(i))throw new y("Unsufficient funds.");let o=[];const s=this.getLevel(),a=new Date(i);let c,f;for(let t=0;t<n;t++)c=g.buildInvestIndexes(a,s),f=c.filter((t=>!this.getEngagedInvests(a).includes(t))),o=o.concat(f.slice(0,r)),a.setDate(a.getDate()+1);const u={version:g.VERSION,type:g.TXTYPE.ENGAGE,date:g.dateToInt(i),source:g.publicFromPrivate(t),target:e,money:[],invests:o,signer:0},h=g.signtx(u,t);return this.addTransaction(h),h}engageMoney(t,e,r,n,i=new Date){if(r>this.getAffordableMoneyAmount(i))throw new y("Unsufficient funds.");let o=[];const s=this.getLevel(),a=new Date(i);let c,f;for(let t=0;t<n;t++)c=g.buildMoneyIndexes(a,s),f=c.filter((t=>!this.getEngagedMoney(a).includes(t))),o=o.concat(f.slice(0,r)),a.setDate(a.getDate()+1);const u={version:g.VERSION,type:g.TXTYPE.ENGAGE,date:g.dateToInt(i),source:g.publicFromPrivate(t),target:e,money:o,invests:[],signer:0},h=g.signtx(u,t);return this.addTransaction(h),h}generatePaper(t,e,r,n=new Date){const i=this.getAvailableMoney(e);if(0===i.length)throw new y("Unsufficient funds.");if(n<this.getLastTransactionDate())throw new Error("Invalid date");const o={version:g.VERSION,type:g.TXTYPE.PAPER,date:g.dateToInt(n),money:i,invests:[],source:g.publicFromPrivate(t),target:0,signer:r},s=g.signtx(o,t);return this.addTransaction(s),this.removeMoney(i),o}getAffordableMoneyAmount(t){return this.getLevel()-this.getEngagedMoney(t).length}getLastCreationTransaction(){for(let t of this.blocks)for(let e of t.transactions)if(e.type===g.TXTYPE.CREATE)return e;return null}getLevel(){return this.isEmpty()&&!this.isValidated()?0:Math.floor(Math.cbrt(this.lastblock.total))+1}getMoneyBeforeNextLevel(t=!1){if(this.isEmpty()||!this.isValidated())return 0;const e=this.getLevel();return t?Math.floor(100*(1-this.getMoneyBeforeNextLevel()/Math.pow(e,3))):Math.pow(e,3)-this.lastblock.total}hasLevelUpOnLastTx(){const t=this.getLastTransaction();return null!==t&&t.type==g.TXTYPE.PAY&&Math.floor(Math.cbrt(this.lastblock.total-t.money.length))+1<this.getLevel()}isWaitingValidation(){return 1===this.blocks.length&&this.lastblock.previousHash===g.REF_HASH}isValidated(){return!this.isEmpty()&&this.blocks.length>=2&&this.blocks[this.blocks.length-1].previousHash===g.REF_HASH}makeBirthBlock(t,e,r,n=new Date){const i=g.publicFromPrivate(t);let o={version:g.VERSION,closedate:g.dateToInt(n),previousHash:g.REF_HASH,signer:i,merkleroot:0,money:[g.formatMoneyIndex(n,0)],invests:[g.formatMoneyIndex(n,0)],total:0,transactions:[g.signtx({version:g.VERSION,date:g.dateToInt(e),source:i,target:r,signer:0,money:[],invests:[],type:g.TXTYPE.INIT},t),g.signtx({version:g.VERSION,date:g.dateToInt(n),source:i,target:i,signer:0,money:[g.formatMoneyIndex(n,0)],invests:[g.formatMoneyIndex(n,0)],type:g.TXTYPE.CREATE},t)]};return o=g.signblock(o,t),this.addBlock(o),o}startBlockchain(t,e,r,n=null,i=new Date){return n=n||g.randomPrivateKey(),this.makeBirthBlock(n,e,t,i),this.validateAccount(r,i),n}validateAccount(t,e=new Date){let r={closedate:g.dateToInt(e),previousHash:this.lastblock.hash,signer:g.publicFromPrivate(t),merkleroot:0,money:[],invests:[],total:0,transactions:[],version:g.VERSION};return r=g.signblock(r,t),this.addBlock(r),r}},EcosystemBlockchain:class extends g{isWaitingValidation(){return 1===this.blocks.length&&this.lastblock.previousHash===g.ECOREF_HASH}isValidated(){return!this.isEmpty()&&this.blocks.length>=2&&this.blocks[this.blocks.length-1].previousHash===g.ECOREF_HASH}makeBirthBlock(t,e,r,n=new Date){const i=g.publicFromPrivate(t);let o={version:g.VERSION,closedate:g.dateToInt(n),previousHash:g.ECOREF_HASH,signer:i,merkleroot:0,money:[],invests:[],total:0,transactions:[g.signtx({version:g.VERSION,date:g.dateToInt(n),source:i,target:r,signer:0,money:[],invests:[],type:g.TXTYPE.INIT},t),g.signtx({version:g.VERSION,date:g.dateToInt(n),source:i,target:e,signer:0,money:[],invests:[],type:g.TXTYPE.SETADMIN},t)]};return o=g.signblock(o,t),this.addBlock(o),o}startBlockchain(t,e,r,n=null,i=new Date){return n=n||g.randomPrivateKey(),this.makeBirthBlock(n,r,t,i),this.validateAccount(e,i),n}validateAccount(t,e=new Date){let r={closedate:g.dateToInt(e),previousHash:this.lastblock.hash,signer:g.publicFromPrivate(t),merkleroot:0,money:[],invests:[],total:0,transactions:[],version:g.VERSION};return r=g.signblock(r,t),this.addBlock(r),r}},InvalidTransactionError:y,UnauthorizedError:p}},127:function(t,e,r){"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g&&r.g,t.exports=function(){"use strict";var t,e="3.7.7",r=e,n="function"==typeof Buffer,i="function"==typeof TextDecoder?new TextDecoder:void 0,o="function"==typeof TextEncoder?new TextEncoder:void 0,s=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),a=(t={},s.forEach((function(e,r){return t[e]=r})),t),c=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),u="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(t){return new Uint8Array(Array.prototype.slice.call(t,0))},h=function(t){return t.replace(/=/g,"").replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"}))},l=function(t){return t.replace(/[^A-Za-z0-9\+\/]/g,"")},d=function(t){for(var e,r,n,i,o="",a=t.length%3,c=0;c<t.length;){if((r=t.charCodeAt(c++))>255||(n=t.charCodeAt(c++))>255||(i=t.charCodeAt(c++))>255)throw new TypeError("invalid character found");o+=s[(e=r<<16|n<<8|i)>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}return a?o.slice(0,a-3)+"===".substring(a):o},y="function"==typeof btoa?function(t){return btoa(t)}:n?function(t){return Buffer.from(t,"binary").toString("base64")}:d,p=n?function(t){return Buffer.from(t).toString("base64")}:function(t){for(var e=[],r=0,n=t.length;r<n;r+=4096)e.push(f.apply(null,t.subarray(r,r+4096)));return y(e.join(""))},g=function(t,e){return void 0===e&&(e=!1),e?h(p(t)):p(t)},w=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?f(192|e>>>6)+f(128|63&e):f(224|e>>>12&15)+f(128|e>>>6&63)+f(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return f(240|e>>>18&7)+f(128|e>>>12&63)+f(128|e>>>6&63)+f(128|63&e)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,v=function(t){return t.replace(b,w)},m=n?function(t){return Buffer.from(t,"utf8").toString("base64")}:o?function(t){return p(o.encode(t))}:function(t){return y(v(t))},E=function(t,e){return void 0===e&&(e=!1),e?h(m(t)):m(t)},A=function(t){return E(t,!0)},x=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,k=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return f(55296+(e>>>10))+f(56320+(1023&e));case 3:return f((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return f((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},B=function(t){return t.replace(x,k)},S=function(t){if(t=t.replace(/\s+/g,""),!c.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));for(var e,r,n,i="",o=0;o<t.length;)e=a[t.charAt(o++)]<<18|a[t.charAt(o++)]<<12|(r=a[t.charAt(o++)])<<6|(n=a[t.charAt(o++)]),i+=64===r?f(e>>16&255):64===n?f(e>>16&255,e>>8&255):f(e>>16&255,e>>8&255,255&e);return i},T="function"==typeof atob?function(t){return atob(l(t))}:n?function(t){return Buffer.from(t,"base64").toString("binary")}:S,I=n?function(t){return u(Buffer.from(t,"base64"))}:function(t){return u(T(t).split("").map((function(t){return t.charCodeAt(0)})))},U=function(t){return I(R(t))},P=n?function(t){return Buffer.from(t,"base64").toString("utf8")}:i?function(t){return i.decode(I(t))}:function(t){return B(T(t))},R=function(t){return l(t.replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})))},H=function(t){return P(R(t))},O=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}},N=function(){var t=function(t,e){return Object.defineProperty(String.prototype,t,O(e))};t("fromBase64",(function(){return H(this)})),t("toBase64",(function(t){return E(this,t)})),t("toBase64URI",(function(){return E(this,!0)})),t("toBase64URL",(function(){return E(this,!0)})),t("toUint8Array",(function(){return U(this)}))},L=function(){var t=function(t,e){return Object.defineProperty(Uint8Array.prototype,t,O(e))};t("toBase64",(function(t){return g(this,t)})),t("toBase64URI",(function(){return g(this,!0)})),t("toBase64URL",(function(){return g(this,!0)}))},C={version:e,VERSION:r,atob:T,atobPolyfill:S,btoa:y,btoaPolyfill:d,fromBase64:H,toBase64:E,encode:E,encodeURI:A,encodeURL:A,utob:v,btou:B,decode:H,isValid:function(t){if("string"!=typeof t)return!1;var e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},fromUint8Array:g,toUint8Array:U,extendString:N,extendUint8Array:L,extendBuiltins:function(){N(),L()},Base64:{}};return Object.keys(C).forEach((function(t){return C.Base64[t]=C[t]})),C}()},158:(t,e,r)=>{e.Encoder=o;var n=r(611),i=r(357).D;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(t){this.write(t),this.emit("data",this.read())},o.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},175:(t,e,r)=>{"use strict";t=r.nmd(t),Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.assertHash=e.assertBytes=e.assertBool=e.assertNumber=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const n=r(301);if(e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),e.rotr=(t,e)=>t<<32-e|t>>>e,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function o(t){if(2!==t.length)throw new Error("Invalid byte sequence");const e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function s(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}function a(t){if("string"==typeof t&&(t=s(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}function c(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}e.bytesToHex=function(t){let e="";for(let r=0;r<t.length;r++)e+=i[t[r]];return e},e.hexToBytes=function(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r;e[r]=o(t.slice(n,n+2))}return e},e.nextTick=(()=>{const e="function"==typeof t.require&&t.require.bind(t);try{if(e){const{setImmediate:t}=e("timers");return()=>new Promise((e=>t(e)))}}catch(t){}return()=>new Promise((t=>setTimeout(t,0)))})(),e.asyncLoop=async function(t,r,n){let i=Date.now();for(let o=0;o<t;o++){n(o);const t=Date.now()-i;t>=0&&t<r||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=s,e.toBytes=a,e.concatBytes=function(...t){if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r},e.assertNumber=c,e.assertBool=function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},e.assertBytes=function(t,...e){if(!(t instanceof Uint8Array)||e.length&&!e.includes(t.length))throw new TypeError(`Expected ${e} bytes, not ${typeof t} with length=${t.length}`)},e.assertHash=function(t){if("function"!=typeof t||"function"!=typeof t.init)throw new Error("Hash should be wrapped by utils.wrapConstructor");c(t.outputLen),c(t.blockLen)},e.Hash=class{clone(){return this._cloneInto()}},e.checkOpts=function(t,e){if(void 0!==e&&("object"!=typeof e||(r=e,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(t,e)},e.wrapConstructor=function(t){const e=e=>t().update(a(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.init=e.create=()=>t(),e},e.wrapConstructorWithOpts=function(t){const e=(e,r)=>t(r).update(a(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.init=e.create=e=>t(e),e},e.randomBytes=function(t=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(t));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}},179:(t,e)=>{e.copy=function(t,e,r,n){var i;r||(r=0),n||0===n||(n=this.length),e||(e=0);var o=n-r;if(t===this&&r<e&&e<n)for(i=o-1;i>=0;i--)t[i+e]=this[i+r];else for(i=0;i<o;i++)t[i+e]=this[i+r];return o},e.toString=function(t,e,r){var n=this,i=0|e;r||(r=n.length);for(var o="",s=0;i<r;)(s=n[i++])<128?o+=String.fromCharCode(s):(192==(224&s)?s=(31&s)<<6|63&n[i++]:224==(240&s)?s=(15&s)<<12|(63&n[i++])<<6|63&n[i++]:240==(248&s)&&(s=(7&s)<<18|(63&n[i++])<<12|(63&n[i++])<<6|63&n[i++]),s>=65536?(s-=65536,o+=String.fromCharCode(55296+(s>>>10),56320+(1023&s))):o+=String.fromCharCode(s));return o},e.write=function(t,e){for(var r=this,n=e||(e|=0),i=t.length,o=0,s=0;s<i;)(o=t.charCodeAt(s++))<128?r[n++]=o:o<2048?(r[n++]=192|o>>>6,r[n++]=128|63&o):o<55296||o>57343?(r[n++]=224|o>>>12,r[n++]=128|o>>>6&63,r[n++]=128|63&o):(o=65536+(o-55296<<10|t.charCodeAt(s++)-56320),r[n++]=240|o>>>18,r[n++]=128|o>>>12&63,r[n++]=128|o>>>6&63,r[n++]=128|63&o);return n-e}},188:(t,e,r)=>{var n=r(204),i=t.exports=n.hasArrayBuffer?o(0):[];function o(t){return new Uint8Array(t)}i.alloc=o,i.concat=n.concat,i.from=function(t){if(n.isView(t)){var e=t.byteOffset,r=t.byteLength;(t=t.buffer).byteLength!==r&&(t.slice?t=t.slice(e,e+r):(t=new Uint8Array(t)).byteLength!==r&&(t=Array.prototype.slice.call(t,e,e+r)))}else{if("string"==typeof t)return n.from.call(i,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(t)}},204:(t,e,r)=>{var n=e.global=r(924),i=e.hasBuffer=n&&!!n.isBuffer,o=e.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=e.isArray=r(634);e.isArrayBuffer=o?function(t){return t instanceof ArrayBuffer||y(t)}:w;var a=e.isBuffer=i?n.isBuffer:w,c=e.isView=o?ArrayBuffer.isView||b("ArrayBuffer","buffer"):w;e.alloc=d,e.concat=function(t,r){r||(r=0,Array.prototype.forEach.call(t,(function(t){r+=t.length})));var n=this!==e&&this||t[0],i=d.call(n,r),o=0;return Array.prototype.forEach.call(t,(function(t){o+=l.copy.call(t,i,o)})),i},e.from=function(t){return"string"==typeof t?p.call(this,t):g(this).from(t)};var f=e.Array=r(964),u=e.Buffer=r(847),h=e.Uint8Array=r(188),l=e.prototype=r(43);function d(t){return g(this).alloc(t)}var y=b("ArrayBuffer");function p(t){var e=3*t.length,r=d.call(this,e),n=l.write.call(r,t);return e!==n&&(r=l.slice.call(r,0,n)),r}function g(t){return a(t)?u:c(t)?h:s(t)?f:i?u:o?h:f}function w(){return!1}function b(t,e){return t="[object "+t+"]",function(r){return null!=r&&{}.toString.call(e?r[e]:r)===t}}},236:(t,e,r)=>{e.setExtPackers=function(t){t.addExtPacker(14,Error,[h,c]),t.addExtPacker(1,EvalError,[h,c]),t.addExtPacker(2,RangeError,[h,c]),t.addExtPacker(3,ReferenceError,[h,c]),t.addExtPacker(4,SyntaxError,[h,c]),t.addExtPacker(5,TypeError,[h,c]),t.addExtPacker(6,URIError,[h,c]),t.addExtPacker(10,RegExp,[u,c]),t.addExtPacker(11,Boolean,[f,c]),t.addExtPacker(12,String,[f,c]),t.addExtPacker(13,Date,[Number,c]),t.addExtPacker(15,Number,[f,c]),"undefined"!=typeof Uint8Array&&(t.addExtPacker(17,Int8Array,s),t.addExtPacker(18,Uint8Array,s),t.addExtPacker(19,Int16Array,s),t.addExtPacker(20,Uint16Array,s),t.addExtPacker(21,Int32Array,s),t.addExtPacker(22,Uint32Array,s),t.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&t.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&t.addExtPacker(25,Uint8ClampedArray,s),t.addExtPacker(26,ArrayBuffer,s),t.addExtPacker(29,DataView,s)),i.hasBuffer&&t.addExtPacker(27,o,i.from)};var n,i=r(204),o=i.global,s=i.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function c(t){return n||(n=r(870).encode),n(t)}function f(t){return t.valueOf()}function u(t){(t=RegExp.prototype.toString.call(t).split("/")).shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function h(t){var e={};for(var r in a)e[r]=t[r];return e}},242:(t,e,r)=>{var n=r(970);function i(t){var e,r=new Array(256);for(e=0;e<=127;e++)r[e]=o(e);for(e=128;e<=143;e++)r[e]=a(e-128,t.map);for(e=144;e<=159;e++)r[e]=a(e-144,t.array);for(e=160;e<=191;e++)r[e]=a(e-160,t.str);for(r[192]=o(null),r[193]=null,r[194]=o(!1),r[195]=o(!0),r[196]=s(t.uint8,t.bin),r[197]=s(t.uint16,t.bin),r[198]=s(t.uint32,t.bin),r[199]=s(t.uint8,t.ext),r[200]=s(t.uint16,t.ext),r[201]=s(t.uint32,t.ext),r[202]=t.float32,r[203]=t.float64,r[204]=t.uint8,r[205]=t.uint16,r[206]=t.uint32,r[207]=t.uint64,r[208]=t.int8,r[209]=t.int16,r[210]=t.int32,r[211]=t.int64,r[212]=a(1,t.ext),r[213]=a(2,t.ext),r[214]=a(4,t.ext),r[215]=a(8,t.ext),r[216]=a(16,t.ext),r[217]=s(t.uint8,t.str),r[218]=s(t.uint16,t.str),r[219]=s(t.uint32,t.str),r[220]=s(t.uint16,t.array),r[221]=s(t.uint32,t.array),r[222]=s(t.uint16,t.map),r[223]=s(t.uint32,t.map),e=224;e<=255;e++)r[e]=o(e-256);return r}function o(t){return function(){return t}}function s(t,e){return function(r){var n=t(r);return e(r,n)}}function a(t,e){return function(r){return e(r,t)}}e.getReadToken=function(t){var e=n.getReadFormat(t);return t&&t.useraw?function(t){var e,r=i(t).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],e=160;e<=191;e++)r[e]=a(e-160,t.bin);return r}(e):i(e)}},251:(t,e)=>{e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,f=c>>1,u=-7,h=r?i-1:0,l=r?-1:1,d=t[e+h];for(h+=l,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=l,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+h],h+=l,u-=8);if(0===o)o=1-f;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=f}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c,f=8*o-i-1,u=(1<<f)-1,h=u>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,y=n?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=y,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+d]=255&s,d+=y,s/=256,f-=8);t[r+d-y]|=128*p}},294:(t,e,r)=>{var n=r(816).u,i=r(4),o=r(970).readUint8,s=r(242),a=r(704);function c(){var t=this.options;return this.decode=function(t){var e=s.getReadToken(t);return function(t){var r=o(t),n=e[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(t)}}(t),t&&t.preset&&i.setExtUnpackers(this),this}a.install({addExtUnpacker:function(t,e){(this.extUnpackers||(this.extUnpackers=[]))[t]=a.filter(e)},getExtUnpacker:function(t){return(this.extUnpackers||(this.extUnpackers=[]))[t]||function(e){return new n(e,t)}},init:c}),e.preset=c.call(a.preset)},301:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=void 0,e.crypto={node:void 0,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0}},305:function(t,e){!function(t){var e,r="undefined",n=r!==typeof Buffer&&Buffer,i=r!==typeof Uint8Array&&Uint8Array,o=r!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(t){return!!t&&"[object Array]"==Object.prototype.toString.call(t)},c=4294967296;function f(a,f,m){var E=f?0:4,A=f?4:0,x=f?0:3,k=f?1:2,B=f?2:1,S=f?3:0,T=f?g:b,I=f?w:v,U=H.prototype,P="is"+a,R="_"+P;return U.buffer=void 0,U.offset=0,U[R]=!0,U.toNumber=O,U.toString=function(t){var e=this.buffer,r=this.offset,n=L(e,r+E),i=L(e,r+A),o="",s=!m&&2147483648&n;for(s&&(n=~n,i=c-i),t=t||10;;){var a=n%t*c+i;if(n=Math.floor(n/t),i=Math.floor(a/t),o=(a%t).toString(t)+o,!n&&!i)break}return s&&(o="-"+o),o},U.toJSON=O,U.toArray=u,n&&(U.toBuffer=h),i&&(U.toArrayBuffer=l),H[P]=function(t){return!(!t||!t[R])},t[a]=H,H;function H(t,n,a,f){return this instanceof H?function(t,n,a,f,u){i&&o&&(n instanceof o&&(n=new i(n)),f instanceof o&&(f=new i(f))),n||a||f||e?(d(n,a)||(u=a,f=n,a=0,n=new(e||Array)(8)),t.buffer=n,t.offset=a|=0,r!==typeof f&&("string"==typeof f?function(t,e,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;for(var f=i;i<o;){var u=parseInt(r[i++],n);if(!(u>=0))break;a=a*n+u,s=s*n+Math.floor(a/c),a%=c}f&&(s=~s,a?a=c-a:s++),N(t,e+E,s),N(t,e+A,a)}(n,a,f,u||10):d(f,u)?y(n,a,f,u):"number"==typeof u?(N(n,a+E,f),N(n,a+A,u)):f>0?T(n,a,f):f<0?I(n,a,f):y(n,a,s,0))):t.buffer=p(s,0)}(this,t,n,a,f):new H(t,n,a,f)}function O(){var t=this.buffer,e=this.offset,r=L(t,e+E),n=L(t,e+A);return m||(r|=0),r?r*c+n:n}function N(t,e,r){t[e+S]=255&r,r>>=8,t[e+B]=255&r,r>>=8,t[e+k]=255&r,r>>=8,t[e+x]=255&r}function L(t,e){return 16777216*t[e+x]+(t[e+k]<<16)+(t[e+B]<<8)+t[e+S]}}function u(t){var r=this.buffer,n=this.offset;return e=null,!1!==t&&0===n&&8===r.length&&a(r)?r:p(r,n)}function h(t){var r=this.buffer,i=this.offset;if(e=n,!1!==t&&0===i&&8===r.length&&Buffer.isBuffer(r))return r;var o=new n(8);return y(o,0,r,i),o}function l(t){var r=this.buffer,n=this.offset,s=r.buffer;if(e=i,!1!==t&&0===n&&s instanceof o&&8===s.byteLength)return s;var a=new i(8);return y(a,0,r,n),a.buffer}function d(t,e){var r=t&&t.length;return e|=0,r&&e+8<=r&&"string"!=typeof t[e]}function y(t,e,r,n){e|=0,n|=0;for(var i=0;i<8;i++)t[e++]=255&r[n++]}function p(t,e){return Array.prototype.slice.call(t,e,e+8)}function g(t,e,r){for(var n=e+8;n>e;)t[--n]=255&r,r/=256}function w(t,e,r){var n=e+8;for(r++;n>e;)t[--n]=255&-r^255,r/=256}function b(t,e,r){for(var n=e+8;e<n;)t[e++]=255&r,r/=256}function v(t,e,r){var n=e+8;for(r++;e<n;)t[e++]=255&-r^255,r/=256}f("Uint64BE",!0,!0),f("Int64BE",!0,!1),f("Uint64LE",!1,!0),f("Int64LE",!1,!1)}("string"!=typeof e.nodeName?e:this||{})},314:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha256=void 0;const n=r(623),i=r(672);e.sha256=(0,i.wrapHash)(n.sha256)},325:(t,e,r)=>{r(294),r(897),e.createCodec=r(704).createCodec},357:(t,e,r)=>{e.D=i;var n=r(897).preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r(614).w.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(t){this.codec.encode(this,t)}},398:(t,e,r)=>{var n=r(634),i=r(305),o=i.Uint64BE,s=i.Int64BE,a=r(204),c=r(43),f=r(685),u=r(40).h,h=r(816).u,l="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,y=[];y[1]=212,y[2]=213,y[4]=214,y[8]=215,y[16]=216,e.getWriteType=function(t){var e,r=f.getWriteToken(t),i=t&&t.useraw,p=l&&t&&t.binarraybuffer,g=p?a.isArrayBuffer:a.isBuffer,w=p?function(t,e){E(t,new Uint8Array(e))}:E,b=d&&t&&t.usemap?function(t,e){if(!(e instanceof Map))return A(t,e);var n=e.size;r[n<16?128+n:n<=65535?222:223](t,n);var i=t.codec.encode;e.forEach((function(e,r,n){i(t,r),i(t,e)}))}:A;return{boolean:function(t,e){r[e?195:194](t,e)},function:m,number:function(t,e){var n=0|e;e===n?r[-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210](t,n):r[203](t,e)},object:i?function(t,e){if(g(e))return function(t,e){var n=e.length;r[n<32?160+n:n<=65535?218:219](t,n),t.send(e)}(t,e);v(t,e)}:v,string:(e=i?function(t){return t<32?1:t<=65535?3:5}:function(t){return t<32?1:t<=255?2:t<=65535?3:5},function(t,n){var i=n.length,o=5+3*i;t.offset=t.reserve(o);var s=t.buffer,a=e(i),f=t.offset+a;i=c.write.call(s,n,f);var u=e(i);if(a!==u){var h=f+u-a,l=f+i;c.copy.call(s,s,h,f,l)}r[1===u?160+i:u<=3?215+u:219](t,i),t.offset+=i}),symbol:m,undefined:m};function v(t,e){if(null===e)return m(t,e);if(g(e))return w(t,e);if(n(e))return function(t,e){var n=e.length;r[n<16?144+n:n<=65535?220:221](t,n);for(var i=t.codec.encode,o=0;o<n;o++)i(t,e[o])}(t,e);if(o.isUint64BE(e))return function(t,e){r[207](t,e.toArray())}(t,e);if(s.isInt64BE(e))return function(t,e){r[211](t,e.toArray())}(t,e);var i=t.codec.getExtPacker(e);if(i&&(e=i(e)),e instanceof h)return function(t,e){var n=e.buffer,i=n.length,o=y[i]||(i<255?199:i<=65535?200:201);r[o](t,i),u[e.type](t),t.send(n)}(t,e);b(t,e)}function m(t,e){r[192](t,e)}function E(t,e){var n=e.length;r[n<255?196:n<=65535?197:198](t,n),t.send(e)}function A(t,e){var n=Object.keys(e),i=n.length;r[i<16?128+i:i<=65535?222:223](t,i);var o=t.codec.encode;n.forEach((function(r){o(t,r),o(t,e[r])}))}}},402:(t,e,r)=>{e.decode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=r(785).n},446:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scryptSync=e.scrypt=void 0;const n=r(663),i=r(672);e.scrypt=async function(t,e,r,o,s,a){return(0,i.assertBytes)(t),(0,i.assertBytes)(e),(0,n.scryptAsync)(t,e,{N:r,r:s,p:o,dkLen:a})},e.scryptSync=function(t,e,r,o,s,a){return(0,i.assertBytes)(t),(0,i.assertBytes)(e),(0,n.scrypt)(t,e,{N:r,r:s,p:o,dkLen:a})}},513:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.schnorr=e.CURVE=e.Signature=e.Point=e.utils=e.getSharedSecret=e.verify=e.signSync=e.sign=e.getPublicKey=void 0;const n=r(615),i=r(623),o=r(598);var s=r(598);Object.defineProperty(e,"getPublicKey",{enumerable:!0,get:function(){return s.getPublicKey}}),Object.defineProperty(e,"sign",{enumerable:!0,get:function(){return s.sign}}),Object.defineProperty(e,"signSync",{enumerable:!0,get:function(){return s.signSync}}),Object.defineProperty(e,"verify",{enumerable:!0,get:function(){return s.verify}}),Object.defineProperty(e,"getSharedSecret",{enumerable:!0,get:function(){return s.getSharedSecret}}),Object.defineProperty(e,"utils",{enumerable:!0,get:function(){return s.utils}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return s.Point}}),Object.defineProperty(e,"Signature",{enumerable:!0,get:function(){return s.Signature}}),Object.defineProperty(e,"CURVE",{enumerable:!0,get:function(){return s.CURVE}}),Object.defineProperty(e,"schnorr",{enumerable:!0,get:function(){return s.schnorr}}),o.utils.hmacSha256Sync=(t,...e)=>{const r=n.hmac.create(i.sha256,t);return e.forEach((t=>r.update(t))),r.digest()}},598:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.schnorr=e.verify=e.signSync=e.sign=e.getSharedSecret=e.recoverPublicKey=e.getPublicKey=e.Signature=e.Point=e.CURVE=void 0;const n=r(923),i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(8),f=Object.freeze({a:i,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});e.CURVE=f;const u=(t,e)=>(t+e/s)/e,h={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=f,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-o*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),c=u(s*t,e),h=u(-n*t,e);let l=L(t-c*r-h*i,e),d=L(-c*n-h*s,e);const y=l>a,p=d>a;if(y&&(l=e-l),p&&(d=e-d),l>a||d>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:y,k1:l,k2neg:p,k2:d}}};function l(t){const{a:e,b:r}=f,n=L(t*t),i=L(n*t);return L(i+e*t+r)}const d=f.a===i;class y extends Error{constructor(t){super(t)}}function p(t){if(!(t instanceof g))throw new TypeError("JacobianPoint expected")}class g{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof v))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(v.ZERO)?g.ZERO:new g(t.x,t.y,o)}static toAffineBatch(t){const e=function(t,e=f.P){const r=new Array(t.length),n=D(t.reduce(((t,n,o)=>n===i?t:(r[o]=t,L(t*n,e))),o),e);return t.reduceRight(((t,n,o)=>n===i?t:(r[o]=L(t*r[o],e),L(t*n,e))),n),r}(t.map((t=>t.z)));return t.map(((t,r)=>t.toAffine(e[r])))}static normalizeZ(t){return g.toAffineBatch(t).map(g.fromAffine)}equals(t){p(t);const{x:e,y:r,z:n}=this,{x:i,y:o,z:s}=t,a=L(n*n),c=L(s*s),f=L(e*c),u=L(i*a),h=L(L(r*s)*c),l=L(L(o*n)*a);return f===u&&h===l}negate(){return new g(this.x,L(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,n=L(t*t),i=L(e*e),o=L(i*i),f=t+i,u=L(s*(L(f*f)-n-o)),h=L(a*n),l=L(h*h),d=L(l-s*u),y=L(h*(u-d)-c*o),p=L(s*e*r);return new g(d,y,p)}add(t){p(t);const{x:e,y:r,z:n}=this,{x:o,y:a,z:c}=t;if(o===i||a===i)return this;if(e===i||r===i)return t;const f=L(n*n),u=L(c*c),h=L(e*u),l=L(o*f),d=L(L(r*c)*u),y=L(L(a*n)*f),w=L(l-h),b=L(y-d);if(w===i)return b===i?this.double():g.ZERO;const v=L(w*w),m=L(w*v),E=L(h*v),A=L(b*b-m-s*E),x=L(b*(E-A)-d*m),k=L(n*c*w);return new g(A,x,k)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=g.ZERO;if("bigint"==typeof t&&t===i)return e;let r=N(t);if(r===o)return this;if(!d){let t=e,n=this;for(;r>i;)r&o&&(t=t.add(n)),n=n.double(),r>>=o;return t}let{k1neg:n,k1:s,k2neg:a,k2:c}=h.splitScalar(r),f=e,u=e,l=this;for(;s>i||c>i;)s&o&&(f=f.add(l)),c&o&&(u=u.add(l)),l=l.double(),s>>=o,c>>=o;return n&&(f=f.negate()),a&&(u=u.negate()),u=new g(L(u.x*h.beta),u.y,u.z),f.add(u)}precomputeWindow(t){const e=d?128/t+1:256/t+1,r=[];let n=this,i=n;for(let o=0;o<e;o++){i=n,r.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(t,e){!e&&this.equals(g.BASE)&&(e=v.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=e&&b.get(e);n||(n=this.precomputeWindow(r),e&&1!==r&&(n=g.normalizeZ(n),b.set(e,n)));let i=g.ZERO,s=g.BASE;const a=1+(d?128/r:256/r),c=2**(r-1),f=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<a;e++){const r=e*c;let a=Number(t&f);t>>=h,a>c&&(a-=u,t+=o);const l=r,d=r+Math.abs(a)-1,y=e%2!=0,p=a<0;0===a?s=s.add(w(y,n[l])):i=i.add(w(p,n[d]))}return{p:i,f:s}}multiply(t,e){let r,n,i=N(t);if(d){const{k1neg:t,k1:o,k2neg:s,k2:a}=h.splitScalar(i);let{p:c,f}=this.wNAF(o,e),{p:u,f:l}=this.wNAF(a,e);c=w(t,c),u=w(s,u),u=new g(L(u.x*h.beta),u.y,u.z),r=c.add(u),n=f.add(l)}else{const{p:t,f:o}=this.wNAF(i,e);r=t,n=o}return g.normalizeZ([r,n])[0]}toAffine(t){const{x:e,y:r,z:n}=this,i=this.equals(g.ZERO);null==t&&(t=i?c:D(n));const s=t,a=L(s*s),f=L(a*s),u=L(e*a),h=L(r*f),l=L(n*s);if(i)return v.ZERO;if(l!==o)throw new Error("invZ was invalid");return new v(u,h)}}function w(t,e){const r=e.negate();return t?r:e}g.BASE=new g(f.Gx,f.Gy,o),g.ZERO=new g(i,o,i);const b=new WeakMap;class v{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,b.delete(this)}hasEvenY(){return this.y%s===i}static fromCompressedHex(t){const e=32===t.length,r=H(e?t:t.subarray(1));if(!z(r))throw new Error("Point is not on curve");let n=function(t){const{P:e}=f,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),h=t*t*t%e,l=h*h*t%e,d=C(l,a)*l%e,y=C(d,a)*l%e,p=C(y,s)*h%e,g=C(p,n)*p%e,w=C(g,i)*g%e,b=C(w,c)*w%e,v=C(b,u)*b%e,m=C(v,c)*w%e,E=C(m,a)*l%e,A=C(E,o)*g%e,x=C(A,r)*h%e,k=C(x,s);if(k*k%e!==t)throw new Error("Cannot find square root");return k}(l(r));const i=(n&o)===o;e?i&&(n=L(-n)):!(1&~t[0])!==i&&(n=L(-n));const c=new v(r,n);return c.assertValidity(),c}static fromUncompressedHex(t){const e=H(t.subarray(1,33)),r=H(t.subarray(33,65)),n=new v(e,r);return n.assertValidity(),n}static fromHex(t){const e=O(t),r=e.length,n=e[0];if(32===r)return this.fromCompressedHex(e);if(33===r&&(2===n||3===n))return this.fromCompressedHex(e);if(65===r&&4===n)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return v.BASE.multiply($(t))}static fromSignature(t,e,r){const{r:n,s:i}=W(e);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=M(O(t)),{n:s}=f,a=2===r||3===r?n+s:n,c=D(a,s),u=L(-o*c,s),h=L(i*c,s),l=1&r?"03":"02",d=v.fromHex(l+T(a)),y=v.BASE.multiplyAndAddUnsafe(d,u,h);if(!y)throw new Error("Cannot recover signature: point at infinify");return y.assertValidity(),y}toRawBytes(t=!1){return R(this.toHex(t))}toHex(t=!1){const e=T(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${T(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!z(e)||!z(r))throw new Error(t);const n=L(r*r);if(L(n-l(e))!==i)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new v(this.x,L(-this.y))}double(){return g.fromAffine(this).double().toAffine()}add(t){return g.fromAffine(this).add(g.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return g.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const n=g.fromAffine(this),s=e===i||e===o||this!==v.BASE?n.multiplyUnsafe(e):n.multiply(e),a=g.fromAffine(t).multiplyUnsafe(r),c=s.add(a);return c.equals(g.ZERO)?void 0:c.toAffine()}}function m(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function E(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${B(t)}`);const e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:H(r),left:t.subarray(e+2)}}e.Point=v,v.BASE=new v(f.Gx,f.Gy),v.ZERO=new v(i,i);class A{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof t&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=e?B(t):t;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new A(P(n.slice(0,64)),P(n.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if("string"!=typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s:n}=function(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${B(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:r}=E(t.subarray(2)),{data:n,left:i}=E(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${B(i)}`);return{r:e,s:n}}(e?t:R(t));return new A(r,n)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!F(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!F(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=f.n>>o;return this.s>t}normalizeS(){return this.hasHighS()?new A(this.r,L(-this.s,f.n)):this}toDERRawBytes(){return R(this.toDERHex())}toDERHex(){const t=m(U(this.s)),e=m(U(this.r)),r=t.length/2,n=e.length/2,i=U(r),o=U(n);return`30${U(n+r+4)}02${o}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return R(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}function x(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(e);for(let e=0,n=0;e<t.length;e++){const i=t[e];r.set(i,n),n+=i.length}return r}e.Signature=A;const k=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function B(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=k[t[r]];return e}const S=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function T(t){if("bigint"!=typeof t)throw new Error("Expected bigint");if(!(i<=t&&t<S))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function I(t){const e=R(T(t));if(32!==e.length)throw new Error("Error: expected 32 bytes");return e}function U(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function P(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function R(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=2*r,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function H(t){return P(B(t))}function O(t){return t instanceof Uint8Array?Uint8Array.from(t):R(t)}function N(t){if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"==typeof t&&F(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function L(t,e=f.P){const r=t%e;return r>=i?r:e+r}function C(t,e){const{P:r}=f;let n=t;for(;e-- >i;)n*=n,n%=r;return n}function D(t,e=f.P){if(t===i||e<=i)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=L(t,e),n=e,s=i,a=o,c=o,u=i;for(;r!==i;){const t=n/r,e=n%r,i=s-c*t,o=a-u*t;n=r,r=e,s=c,a=u,c=i,u=o}if(n!==o)throw new Error("invert: does not exist");return L(s,e)}function M(t,e=!1){const r=function(t){const e=8*t.length-256,r=H(t);return e>0?r>>BigInt(e):r}(t);if(e)return r;const{n}=f;return r>=n?r-n:r}let V,j;class _{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,"number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return e.utils.hmacSha256(this.k,...t)}hmacSync(...t){return j(this.k,...t)}checkSync(){if("function"!=typeof j)throw new y("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();e.push(r),t+=this.v.length}return x(...e)}generateSync(){this.checkSync(),this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();e.push(r),t+=this.v.length}return x(...e)}}function F(t){return i<t&&t<f.n}function z(t){return i<t&&t<f.P}function Y(t,e,r,n=!0){const{n:s}=f,a=M(t,!0);if(!F(a))return;const c=D(a,s),u=v.BASE.multiply(a),h=L(u.x,s);if(h===i)return;const l=L(c*L(e+r*h,s),s);if(l===i)return;let d=new A(h,l),y=(u.x===d.r?0:2)|Number(u.y&o);return n&&d.hasHighS()&&(d=d.normalizeS(),y^=1),{sig:d,recovery:y}}function $(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"==typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");e=P(t)}else{if(!(t instanceof Uint8Array))throw new TypeError("Expected valid private key");if(32!==t.length)throw new Error("Expected 32 bytes of private key");e=H(t)}if(!F(e))throw new Error("Expected private key: 0 < key < n");return e}function K(t){return t instanceof v?(t.assertValidity(),t):v.fromHex(t)}function W(t){if(t instanceof A)return t.assertValidity(),t;try{return A.fromDER(t)}catch(e){return A.fromCompact(t)}}function X(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?33===n||65===n:r?66===n||130===n:t instanceof v}function G(t){return H(t.length>32?t.slice(0,32):t)}function q(t){const e=G(t),r=L(e,f.n);return Z(r<i?e:r)}function Z(t){return I(t)}function J(t,r,n){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const i=O(t),o=$(r),s=[Z(o),q(i)];if(null!=n){!0===n&&(n=e.utils.randomBytes(32));const t=O(n);if(32!==t.length)throw new Error("sign: Expected 32 bytes of extra data");s.push(t)}return{seed:x(...s),m:G(i),d:o}}function Q(t,e){const{sig:r,recovery:n}=t,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},e),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}e.getPublicKey=function(t,e=!1){return v.fromPrivateKey(t).toRawBytes(e)},e.recoverPublicKey=function(t,e,r,n=!1){return v.fromSignature(t,e,r).toRawBytes(n)},e.getSharedSecret=function(t,e,r=!1){if(X(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!X(e))throw new TypeError("getSharedSecret: second arg must be public key");const n=K(e);return n.assertValidity(),n.multiply($(t)).toRawBytes(r)},e.sign=async function(t,e,r={}){const{seed:n,m:i,d:o}=J(t,e,r.extraEntropy),s=new _(32,32);let a;for(await s.reseed(n);!(a=Y(await s.generate(),i,o,r.canonical));)await s.reseed();return Q(a,r)},e.signSync=function(t,e,r={}){const{seed:n,m:i,d:o}=J(t,e,r.extraEntropy),s=new _(32,32);let a;for(s.reseedSync(n);!(a=Y(s.generateSync(),i,o,r.canonical));)s.reseedSync();return Q(a,r)};const tt={strict:!0};function et(t){return L(H(t),f.n)}e.verify=function(t,e,r,n=tt){let i;try{i=W(t),e=O(e)}catch(t){return!1}const{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;const a=M(e);let c;try{c=K(r)}catch(t){return!1}const{n:u}=f,h=D(s,u),l=L(a*h,u),d=L(o*h,u),y=v.BASE.multiplyAndAddUnsafe(c,l,d);return!!y&&L(y.x,u)===o};class rt{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=O(t);if(64!==e.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${e.length}`);const r=H(e.subarray(0,32)),n=H(e.subarray(32,64));return new rt(r,n)}assertValidity(){const{r:t,s:e}=this;if(!z(t)||!F(e))throw new Error("Invalid signature")}toHex(){return T(this.r)+T(this.s)}toRawBytes(){return R(this.toHex())}}class nt{constructor(t,r,n=e.utils.randomBytes()){if(null==t)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=O(t);const{x:i,scalar:o}=this.getScalar($(r));if(this.px=i,this.d=o,this.rand=O(n),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){const e=v.fromPrivateKey(t),r=e.hasEvenY()?t:f.n-t;return{point:e,scalar:r,x:e.toRawX()}}initNonce(t,e){return I(t^H(e))}finalizeNonce(t){const e=L(H(t),f.n);if(e===i)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:n,scalar:o}=this.getScalar(e);return{R:r,rx:n,k:o}}finalizeSig(t,e,r,n){return new rt(t.x,L(e+r*n,f.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:t,d:r,px:n,rand:i}=this,o=e.utils.taggedHash,s=this.initNonce(r,await o(ft.aux,i)),{R:a,rx:c,k:f}=this.finalizeNonce(await o(ft.nonce,s,n,t)),u=et(await o(ft.challenge,c,n,t)),h=this.finalizeSig(a,f,u,r);return await st(h,t,n)||this.error(),h}calcSync(){const{m:t,d:r,px:n,rand:i}=this,o=e.utils.taggedHashSync,s=this.initNonce(r,o(ft.aux,i)),{R:a,rx:c,k:f}=this.finalizeNonce(o(ft.nonce,s,n,t)),u=et(o(ft.challenge,c,n,t)),h=this.finalizeSig(a,f,u,r);return at(h,t,n)||this.error(),h}}function it(t,e,r){const n=t instanceof rt,i=n?t:rt.fromHex(t);return n&&i.assertValidity(),{...i,m:O(e),P:K(r)}}function ot(t,e,r,n){const i=v.BASE.multiplyAndAddUnsafe(e,$(r),L(-n,f.n));return!(!i||!i.hasEvenY()||i.x!==t)}async function st(t,r,n){try{const{r:i,s:o,m:s,P:a}=it(t,r,n),c=et(await e.utils.taggedHash(ft.challenge,I(i),a.toRawX(),s));return ot(i,a,o,c)}catch(t){return!1}}function at(t,r,n){try{const{r:i,s:o,m:s,P:a}=it(t,r,n),c=et(e.utils.taggedHashSync(ft.challenge,I(i),a.toRawX(),s));return ot(i,a,o,c)}catch(t){if(t instanceof y)throw t;return!1}}e.schnorr={Signature:rt,getPublicKey:function(t){return v.fromPrivateKey(t).toRawX()},sign:async function(t,e,r){return new nt(t,e,r).calc()},verify:st,signSync:function(t,e,r){return new nt(t,e,r).calcSync()},verifySync:at},v.BASE._setWindowSize(8);const ct={node:n,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},ft={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},ut={};e.utils={bytesToHex:B,hexToBytes:R,concatBytes:x,mod:L,invert:D,isValidPrivateKey(t){try{return $(t),!0}catch(t){return!1}},_bigintTo32Bytes:I,_normalizePrivateKey:$,hashToPrivateKey:t=>{if((t=O(t)).length<40||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return I(L(H(t),f.n-o)+o)},randomBytes:(t=32)=>{if(ct.web)return ct.web.getRandomValues(new Uint8Array(t));if(ct.node){const{randomBytes:e}=ct.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>e.utils.hashToPrivateKey(e.utils.randomBytes(40)),precompute(t=8,e=v.BASE){const r=e===v.BASE?e:new v(e.x,e.y);return r._setWindowSize(t),r.multiply(a),r},sha256:async(...t)=>{if(ct.web){const e=await ct.web.subtle.digest("SHA-256",x(...t));return new Uint8Array(e)}if(ct.node){const{createHash:e}=ct.node,r=e("sha256");return t.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(ct.web){const r=await ct.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=x(...e),i=await ct.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(ct.node){const{createHmac:r}=ct.node,n=r("sha256",t);return e.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...r)=>{let n=ut[t];if(void 0===n){const r=await e.utils.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=x(r,r),ut[t]=n}return e.utils.sha256(n,...r)},taggedHashSync:(t,...e)=>{if("function"!=typeof V)throw new y("sha256Sync is undefined, you need to set it");let r=ut[t];if(void 0===r){const e=V(Uint8Array.from(t,(t=>t.charCodeAt(0))));r=x(e,e),ut[t]=r}return V(r,...e)},_JacobianPoint:g},Object.defineProperties(e.utils,{sha256Sync:{configurable:!1,get:()=>V,set(t){V||(V=t)}},hmacSha256Sync:{configurable:!1,get:()=>j,set(t){j||(j=t)}}})},611:t=>{!function(e){t.exports=e;var r="listeners",n={on:function(t,e){return s(this,t).push(e),this},once:function(t,e){var r=this;return n.originalListener=e,s(r,t).push(n),r;function n(){o.call(r,t,n),e.apply(this,arguments)}},off:o,emit:function(t,e){var r=this,n=s(r,t,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach((function(t){t.call(r)}));else if(2===i)n.forEach((function(t){t.call(r,e)}));else{var o=Array.prototype.slice.call(arguments,1);n.forEach((function(t){t.apply(r,o)}))}return!!n.length}};function i(t){for(var e in n)t[e]=n[e];return t}function o(t,e){var n,i=this;if(arguments.length){if(e){if(n=s(i,t,!0)){if(!(n=n.filter((function(t){return t!==e&&t.originalListener!==e}))).length)return o.call(i,t);i[r][t]=n}}else if((n=i[r])&&(delete n[t],!Object.keys(n).length))return o.call(i)}else delete i[r];return i}function s(t,e,n){if(!n||t[r]){var i=t[r]||(t[r]={});return i[e]||(i[e]=[])}}i(e.prototype),e.mixin=i}((function t(){if(!(this instanceof t))return new t}))},614:(t,e,r)=>{e.I=o,e.w=s;var n=r(204),i="BUFFER_SHORTAGE";function o(){if(!(this instanceof o))return new o}function s(){if(!(this instanceof s))return new s}function a(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function c(t){(this.buffers||(this.buffers=[])).push(t)}function f(t){return function(e){for(var r in t)e[r]=t[r];return e}}o.mixin=f({bufferish:n,write:function(t){var e=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=e?t?this.bufferish.concat([e,t]):e:t,this.offset=0},fetch:function(){throw new Error("method not implemented: fetch()")},flush:function(){for(;this.offset<this.buffer.length;){var t,e=this.offset;try{t=this.fetch()}catch(t){if(t&&t.message!=i)throw t;this.offset=e;break}this.push(t)}},push:c,pull:function(){return(this.buffers||(this.buffers=[])).shift()},read:a,reserve:function(t){var e=this.offset,r=e+t;if(r>this.buffer.length)throw new Error(i);return this.offset=r,e},offset:0}),o.mixin(o.prototype),s.mixin=f({bufferish:n,write:function(){throw new Error("method not implemented: write()")},fetch:function(){var t=this.start;if(t<this.offset){var e=this.start=this.offset;return n.prototype.slice.call(this.buffer,t,e)}},flush:function(){for(;this.start<this.offset;){var t=this.fetch();t&&this.push(t)}},push:c,pull:function(){var t=this.buffers||(this.buffers=[]),e=t.length>1?this.bufferish.concat(t):t[0];return t.length=0,e},read:a,reserve:function(t){var e=0|t;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+e;if(i<r)return this.offset=i,n;this.flush(),t=Math.max(t,Math.min(2*r,this.maxBufferSize))}return t=Math.max(t,this.minBufferSize),this.buffer=this.bufferish.alloc(t),this.start=0,this.offset=e,0},send:function(t){var e=t.length;if(e>this.minBufferSize)this.flush(),this.push(t);else{var r=this.reserve(e);n.prototype.copy.call(t,this.buffer,r)}},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),s.mixin(s.prototype)},615:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const n=r(175);class i extends n.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,n.assertHash)(t);const r=(0,n.toBytes)(e);if(this.iHash=t.create(),!(this.iHash instanceof n.Hash))throw new TypeError("Expected instance of class which extends utils.Hash");const i=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const o=new Uint8Array(i);o.set(r.length>this.iHash.blockLen?t.create().update(r).digest():r);for(let t=0;t<o.length;t++)o[t]^=54;this.iHash.update(o),this.oHash=t.create();for(let t=0;t<o.length;t++)o[t]^=106;this.oHash.update(o),o.fill(0)}update(t){if(this.destroyed)throw new Error("instance is destroyed");return this.iHash.update(t),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length!==this.outputLen)throw new Error("HMAC: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.hmac=(t,e,r)=>new i(t,e).update(r).digest(),e.hmac.create=(t,e)=>new i(t,e),e.hmac.init=e.hmac.create},623:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sha256=void 0;const n=r(915),i=r(175),o=(t,e,r)=>t&e^t&r^e&r,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class f extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)c[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=c[t-15],r=c[t-2],n=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,o=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;c[t]=o+c[t-7]+n+c[t-16]|0}let{A:r,B:n,C:a,D:f,E:u,F:h,G:l,H:d}=this;for(let t=0;t<64;t++){const e=d+((0,i.rotr)(u,6)^(0,i.rotr)(u,11)^(0,i.rotr)(u,25))+((y=u)&h^~y&l)+s[t]+c[t]|0,p=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+o(r,n,a)|0;d=l,l=h,h=u,u=f+e|0,f=a,a=n,n=r,r=e+p|0}var y;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,f=f+this.D|0,u=u+this.E|0,h=h+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,n,a,f,u,h,l,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.sha256=(0,i.wrapConstructor)((()=>new f))},634:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},658:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decrypt=e.encrypt=void 0;const n=r(301),i=r(672);function o(t,e,r){if(!r.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${r}`);if(16!==e.length)throw new Error("AES: wrong IV length");if(r.startsWith("aes-128")&&16!==t.length||r.startsWith("aes-256")&&32!==t.length)throw new Error("AES: wrong key length")}async function s(t,e,r){if(!n.crypto.web)throw new Error("Browser crypto not available.");let i;if(["aes-128-cbc","aes-256-cbc"].includes(t)&&(i="cbc"),["aes-128-ctr","aes-256-ctr"].includes(t)&&(i="ctr"),!i)throw new Error("AES: unsupported mode");return[await n.crypto.web.subtle.importKey("raw",e,{name:`AES-${i.toUpperCase()}`,length:8*e.length},!0,["encrypt","decrypt"]),{name:`aes-${i}`,iv:r,counter:r,length:64}]}async function a(t,e,r,a="aes-128-ctr",c=!0){if(o(e,r,a),n.crypto.web){const[i,o]=await s(a,e,r),f=await n.crypto.web.subtle.encrypt(o,i,t);let u=new Uint8Array(f);return c||"aes-cbc"!==o.name||t.length%16||(u=u.slice(0,-16)),u}if(n.crypto.node){const o=n.crypto.node.createCipheriv(a,e,r);return o.setAutoPadding(c),(0,i.concatBytes)(o.update(t),o.final())}throw new Error("The environment doesn't have AES module")}e.encrypt=a,e.decrypt=async function(t,e,r,c="aes-128-ctr",f=!0){if(o(e,r,c),n.crypto.web){const[o,u]=await s(c,e,r);if(!f&&"aes-cbc"===u.name){const n=await async function(t,e,r,n){const i=t.slice(-16);for(let t=0;t<16;t++)i[t]^=16^r[t];return(await a(i,e,r,n)).slice(0,16)}(t,e,r,c);t=(0,i.concatBytes)(t,n)}const h=await n.crypto.web.subtle.decrypt(u,o,t),l=new Uint8Array(h);if("aes-cbc"===u.name){const n=await a(l,e,r,c);if(!(0,i.equalsBytes)(n,t))throw new Error("AES: wrong padding")}return l}if(n.crypto.node){const o=n.crypto.node.createDecipheriv(c,e,r);return o.setAutoPadding(f),(0,i.concatBytes)(o.update(t),o.final())}throw new Error("The environment doesn't have AES module")}},663:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scryptAsync=e.scrypt=void 0;const n=r(623),i=r(941),o=r(175),s=(t,e)=>t<<e|t>>>32-e;function a(t,e,r,n,i,o){let a=t[e++]^r[n++],c=t[e++]^r[n++],f=t[e++]^r[n++],u=t[e++]^r[n++],h=t[e++]^r[n++],l=t[e++]^r[n++],d=t[e++]^r[n++],y=t[e++]^r[n++],p=t[e++]^r[n++],g=t[e++]^r[n++],w=t[e++]^r[n++],b=t[e++]^r[n++],v=t[e++]^r[n++],m=t[e++]^r[n++],E=t[e++]^r[n++],A=t[e++]^r[n++],x=a,k=c,B=f,S=u,T=h,I=l,U=d,P=y,R=p,H=g,O=w,N=b,L=v,C=m,D=E,M=A;for(let t=0;t<8;t+=2)T^=s(x+L|0,7),R^=s(T+x|0,9),L^=s(R+T|0,13),x^=s(L+R|0,18),H^=s(I+k|0,7),C^=s(H+I|0,9),k^=s(C+H|0,13),I^=s(k+C|0,18),D^=s(O+U|0,7),B^=s(D+O|0,9),U^=s(B+D|0,13),O^=s(U+B|0,18),S^=s(M+N|0,7),P^=s(S+M|0,9),N^=s(P+S|0,13),M^=s(N+P|0,18),k^=s(x+S|0,7),B^=s(k+x|0,9),S^=s(B+k|0,13),x^=s(S+B|0,18),U^=s(I+T|0,7),P^=s(U+I|0,9),T^=s(P+U|0,13),I^=s(T+P|0,18),N^=s(O+H|0,7),R^=s(N+O|0,9),H^=s(R+N|0,13),O^=s(H+R|0,18),L^=s(M+D|0,7),C^=s(L+M|0,9),D^=s(C+L|0,13),M^=s(D+C|0,18);i[o++]=a+x|0,i[o++]=c+k|0,i[o++]=f+B|0,i[o++]=u+S|0,i[o++]=h+T|0,i[o++]=l+I|0,i[o++]=d+U|0,i[o++]=y+P|0,i[o++]=p+R|0,i[o++]=g+H|0,i[o++]=w+O|0,i[o++]=b+N|0,i[o++]=v+L|0,i[o++]=m+C|0,i[o++]=E+D|0,i[o++]=A+M|0}function c(t,e,r,n,i){let o=n+0,s=n+16*i;for(let n=0;n<16;n++)r[s+n]=t[e+16*(2*i-1)+n];for(let n=0;n<i;n++,o+=16,e+=16)a(r,s,t,e,r,o),n>0&&(s+=16),a(r,o,t,e+=16,r,s)}function f(t,e,r){const s=(0,o.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:a,r:c,p:f,dkLen:u,asyncTick:h,maxmem:l,onProgress:d}=s;if((0,o.assertNumber)(a),(0,o.assertNumber)(c),(0,o.assertNumber)(f),(0,o.assertNumber)(u),(0,o.assertNumber)(h),(0,o.assertNumber)(l),void 0!==d&&"function"!=typeof d)throw new Error("progressCb should be function");const y=128*c,p=y/4;if(a<=1||a&a-1||a>=2**(y/8)||a>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(f<0||f>137438953440/y)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(u<0||u>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=y*(a+f);if(g>l)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${l} (maxmem)`);const w=(0,i.pbkdf2)(n.sha256,t,e,{c:1,dkLen:y*f}),b=(0,o.u32)(w),v=(0,o.u32)(new Uint8Array(y*a)),m=(0,o.u32)(new Uint8Array(y));let E=()=>{};if(d){const t=2*a*f,e=Math.max(Math.floor(t/1e4),1);let r=0;E=()=>{r++,!d||r%e&&r!==t||d(r/t)}}return{N:a,r:c,p:f,dkLen:u,blockSize32:p,V:v,B32:b,B:w,tmp:m,blockMixCb:E,asyncTick:h}}function u(t,e,r,o,s){const a=(0,i.pbkdf2)(n.sha256,t,r,{c:1,dkLen:e});return r.fill(0),o.fill(0),s.fill(0),a}e.scrypt=function(t,e,r){const{N:n,r:i,p:o,dkLen:s,blockSize32:a,V:h,B32:l,B:d,tmp:y,blockMixCb:p}=f(t,e,r);for(let t=0;t<o;t++){const e=a*t;for(let t=0;t<a;t++)h[t]=l[e+t];for(let t=0,e=0;t<n-1;t++)c(h,e,h,e+=a,i),p();c(h,(n-1)*a,l,e,i),p();for(let t=0;t<n;t++){const t=l[e+a-16]%n;for(let r=0;r<a;r++)y[r]=l[e+r]^h[t*a+r];c(y,0,l,e,i),p()}}return u(t,s,d,h,y)},e.scryptAsync=async function(t,e,r){const{N:n,r:i,p:s,dkLen:a,blockSize32:h,V:l,B32:d,B:y,tmp:p,blockMixCb:g,asyncTick:w}=f(t,e,r);for(let t=0;t<s;t++){const e=h*t;for(let t=0;t<h;t++)l[t]=d[e+t];let r=0;await(0,o.asyncLoop)(n-1,w,(t=>{c(l,r,l,r+=h,i),g()})),c(l,(n-1)*h,d,e,i),g(),await(0,o.asyncLoop)(n,w,(t=>{const r=d[e+h-16]%n;for(let t=0;t<h;t++)p[t]=d[e+t]^l[r*h+t];c(p,0,d,e,i),g()}))}return u(t,a,y,l,p)}},672:(t,e,r)=>{"use strict";t=r.nmd(t),Object.defineProperty(e,"__esModule",{value:!0}),e.crypto=e.wrapHash=e.equalsBytes=e.bytesToUtf8=e.utf8ToBytes=e.createView=e.hexToBytes=e.concatBytes=e.toHex=e.bytesToHex=e.assertBytes=e.assertBool=void 0;const n=r(175);var i=r(175);Object.defineProperty(e,"assertBool",{enumerable:!0,get:function(){return i.assertBool}}),Object.defineProperty(e,"assertBytes",{enumerable:!0,get:function(){return i.assertBytes}}),Object.defineProperty(e,"bytesToHex",{enumerable:!0,get:function(){return i.bytesToHex}}),Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return i.bytesToHex}}),Object.defineProperty(e,"concatBytes",{enumerable:!0,get:function(){return i.concatBytes}}),Object.defineProperty(e,"hexToBytes",{enumerable:!0,get:function(){return i.hexToBytes}}),Object.defineProperty(e,"createView",{enumerable:!0,get:function(){return i.createView}}),Object.defineProperty(e,"utf8ToBytes",{enumerable:!0,get:function(){return i.utf8ToBytes}}),e.bytesToUtf8=function(t){if(!(t instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof t);return(new TextDecoder).decode(t)},e.equalsBytes=function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},e.wrapHash=function(t){return e=>((0,n.assertBytes)(e),t(e))},e.crypto=(()=>{const e="object"==typeof self&&"crypto"in self?self.crypto:void 0,r="function"==typeof t.require&&t.require.bind(t);return{node:r&&!e?r("crypto"):void 0,web:e}})()},685:(t,e,r)=>{var n=r(251),i=r(305),o=i.Uint64BE,s=i.Int64BE,a=r(40).h,c=r(204),f=c.global,u=c.hasBuffer&&"TYPED_ARRAY_SUPPORT"in f&&!f.TYPED_ARRAY_SUPPORT,h=c.hasBuffer&&f.prototype||{};function l(){var t=a.slice();return t[196]=d(196),t[197]=y(197),t[198]=p(198),t[199]=d(199),t[200]=y(200),t[201]=p(201),t[202]=g(202,4,h.writeFloatBE||v,!0),t[203]=g(203,8,h.writeDoubleBE||m,!0),t[204]=d(204),t[205]=y(205),t[206]=p(206),t[207]=g(207,8,w),t[208]=d(208),t[209]=y(209),t[210]=p(210),t[211]=g(211,8,b),t[217]=d(217),t[218]=y(218),t[219]=p(219),t[220]=y(220),t[221]=p(221),t[222]=y(222),t[223]=p(223),t}function d(t){return function(e,r){var n=e.reserve(2),i=e.buffer;i[n++]=t,i[n]=r}}function y(t){return function(e,r){var n=e.reserve(3),i=e.buffer;i[n++]=t,i[n++]=r>>>8,i[n]=r}}function p(t){return function(e,r){var n=e.reserve(5),i=e.buffer;i[n++]=t,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function g(t,e,r,n){return function(i,o){var s=i.reserve(e+1);i.buffer[s++]=t,r.call(i.buffer,o,s,n)}}function w(t,e){new o(this,e,t)}function b(t,e){new s(this,e,t)}function v(t,e){n.write(this,t,e,!1,23,4)}function m(t,e){n.write(this,t,e,!1,52,8)}e.getWriteToken=function(t){return t&&t.uint8array?((e=l())[202]=g(202,4,v),e[203]=g(203,8,m),e):u||c.hasBuffer&&t&&t.safe?function(){var t=a.slice();return t[196]=g(196,1,f.prototype.writeUInt8),t[197]=g(197,2,f.prototype.writeUInt16BE),t[198]=g(198,4,f.prototype.writeUInt32BE),t[199]=g(199,1,f.prototype.writeUInt8),t[200]=g(200,2,f.prototype.writeUInt16BE),t[201]=g(201,4,f.prototype.writeUInt32BE),t[202]=g(202,4,f.prototype.writeFloatBE),t[203]=g(203,8,f.prototype.writeDoubleBE),t[204]=g(204,1,f.prototype.writeUInt8),t[205]=g(205,2,f.prototype.writeUInt16BE),t[206]=g(206,4,f.prototype.writeUInt32BE),t[207]=g(207,8,w),t[208]=g(208,1,f.prototype.writeInt8),t[209]=g(209,2,f.prototype.writeInt16BE),t[210]=g(210,4,f.prototype.writeInt32BE),t[211]=g(211,8,b),t[217]=g(217,1,f.prototype.writeUInt8),t[218]=g(218,2,f.prototype.writeUInt16BE),t[219]=g(219,4,f.prototype.writeUInt32BE),t[220]=g(220,2,f.prototype.writeUInt16BE),t[221]=g(221,4,f.prototype.writeUInt32BE),t[222]=g(222,2,f.prototype.writeUInt16BE),t[223]=g(223,4,f.prototype.writeUInt32BE),t}():l();var e}},704:(t,e,r)=>{var n=r(634);e.createCodec=a,e.install=function(t){for(var e in t)o.prototype[e]=s(o.prototype[e],t[e])},e.filter=function(t){return n(t)?function(t){return t=t.slice(),function(r){return t.reduce(e,r)};function e(t,e){return e(t)}}(t):t};var i=r(204);function o(t){if(!(this instanceof o))return new o(t);this.options=t,this.init()}function s(t,e){return t&&e?function(){return t.apply(this,arguments),e.apply(this,arguments)}:t||e}function a(t){return new o(t)}o.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=i.Uint8Array),this},e.preset=a({preset:!0})},754:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomBytes=e.getRandomBytesSync=void 0;const n=r(175);function i(t){return(0,n.randomBytes)(t)}e.getRandomBytesSync=i,e.getRandomBytes=async function(t){return i(t)}},762:(t,e,r)=>{e.Decoder=o;var n=r(611),i=r(785).n;function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()},o.prototype.push=function(t){this.emit("data",t)},o.prototype.end=function(t){this.decode(t),this.emit("end")}},785:(t,e,r)=>{e.n=i;var n=r(294).preset;function i(t){if(!(this instanceof i))return new i(t);if(t&&(this.options=t,t.codec)){var e=this.codec=t.codec;e.bufferish&&(this.bufferish=e.bufferish)}}r(614).I.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},816:(t,e,r)=>{e.u=function t(e,r){if(!(this instanceof t))return new t(e,r);this.buffer=n.from(e),this.type=r};var n=r(204)},830:(t,e,r)=>{e.encode=r(870).encode,e.decode=r(402).decode,e.Encoder=r(158).Encoder,e.Decoder=r(762).Decoder,e.createCodec=r(325).createCodec,e.codec=r(884).codec},847:(t,e,r)=>{var n=r(204),i=n.global,o=t.exports=n.hasBuffer?s(0):[];function s(t){return new i(t)}o.alloc=n.hasBuffer&&i.alloc||s,o.concat=n.concat,o.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(o,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(t):new i(t)}},870:(t,e,r)=>{e.encode=function(t,e){var r=new n(e);return r.write(t),r.read()};var n=r(357).D},884:(t,e,r)=>{r(294),r(897),e.codec={preset:r(704).preset}},897:(t,e,r)=>{var n=r(816).u,i=r(236),o=r(398),s=r(704);function a(){var t=this.options;return this.encode=function(t){var e=o.getWriteType(t);return function(t,r){var n=e[typeof r];if(!n)throw new Error('Unsupported type "'+typeof r+'": '+r);n(t,r)}}(t),t&&t.preset&&i.setExtPackers(this),this}s.install({addExtPacker:function(t,e,r){r=s.filter(r);var i=e.name;function o(e){return r&&(e=r(e)),new n(e,t)}i&&"Object"!==i?(this.extPackers||(this.extPackers={}))[i]=o:(this.extEncoderList||(this.extEncoderList=[])).unshift([e,o])},getExtPacker:function(t){var e=this.extPackers||(this.extPackers={}),r=t.constructor,n=r&&r.name&&e[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:a}),e.preset=a.call(s.preset)},915:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SHA2=void 0;const n=r(175);class i extends n.Hash{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,n.createView)(this.buffer)}update(t){if(this.destroyed)throw new Error("instance is destroyed");const{view:e,buffer:r,blockLen:i,finished:o}=this;if(o)throw new Error("digest() was already called");const s=(t=(0,n.toBytes)(t)).length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a!==i)r.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(e,0),this.pos=0);else{const e=(0,n.createView)(t);for(;i<=s-o;o+=i)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){if(this.destroyed)throw new Error("instance is destroyed");if(!(t instanceof Uint8Array)||t.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let t=s;t<i;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,f=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+f,a,n)}(r,i-8,BigInt(8*this.length),o),this.process(r,0);const a=(0,n.createView)(t);this.get().forEach(((t,e)=>a.setUint32(4*e,t,o)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}e.SHA2=i},923:()=>{},924:function(t){function e(t){return t&&t.isBuffer&&t}t.exports=e("undefined"!=typeof Buffer&&Buffer)||e(this.Buffer)||e("undefined"!=typeof window&&window.Buffer)||this.Buffer},941:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pbkdf2Async=e.pbkdf2=void 0;const n=r(615),i=r(175);function o(t,e,r,o){(0,i.assertHash)(t);const s=(0,i.checkOpts)({dkLen:32,asyncTick:10},o),{c:a,dkLen:c,asyncTick:f}=s;if((0,i.assertNumber)(a),(0,i.assertNumber)(c),(0,i.assertNumber)(f),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=(0,i.toBytes)(e),h=(0,i.toBytes)(r),l=new Uint8Array(c),d=n.hmac.init(t,u),y=d._cloneInto().update(h);return{c:a,dkLen:c,asyncTick:f,DK:l,PRF:d,PRFSalt:y}}function s(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}e.pbkdf2=function(t,e,r,n){const{c:a,dkLen:c,DK:f,PRF:u,PRFSalt:h}=o(t,e,r,n);let l;const d=new Uint8Array(4),y=(0,i.createView)(d),p=new Uint8Array(u.outputLen);for(let t=1,e=0;e<c;t++,e+=u.outputLen){const r=f.subarray(e,e+u.outputLen);y.setInt32(0,t,!1),(l=h._cloneInto(l)).update(d).digestInto(p),r.set(p.subarray(0,r.length));for(let t=1;t<a;t++){u._cloneInto(l).update(p).digestInto(p);for(let t=0;t<r.length;t++)r[t]^=p[t]}}return s(u,h,f,l,p)},e.pbkdf2Async=async function(t,e,r,n){const{c:a,dkLen:c,asyncTick:f,DK:u,PRF:h,PRFSalt:l}=o(t,e,r,n);let d;const y=new Uint8Array(4),p=(0,i.createView)(y),g=new Uint8Array(h.outputLen);for(let t=1,e=0;e<c;t++,e+=h.outputLen){const r=u.subarray(e,e+h.outputLen);p.setInt32(0,t,!1),(d=l._cloneInto(d)).update(y).digestInto(g),r.set(g.subarray(0,r.length)),await(0,i.asyncLoop)(a-1,f,(t=>{h._cloneInto(d).update(g).digestInto(g);for(let t=0;t<r.length;t++)r[t]^=g[t]}))}return s(h,l,u,d,g)}},964:(t,e,r)=>{var n=r(204),i=t.exports=o(0);function o(t){return new Array(t)}i.alloc=o,i.concat=n.concat,i.from=function(t){if(!n.isBuffer(t)&&n.isView(t))t=n.Uint8Array.from(t);else if(n.isArrayBuffer(t))t=new Uint8Array(t);else{if("string"==typeof t)return n.from.call(i,t);if("number"==typeof t)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(t)}},970:(t,e,r)=>{var n=r(251),i=r(305),o=i.Uint64BE,s=i.Int64BE;e.getReadFormat=function(t){var e=a.hasArrayBuffer&&t&&t.binarraybuffer,r=t&&t.int64;return{map:f&&t&&t.usemap?l:h,array:d,str:y,bin:e?g:p,ext:w,uint8:b,uint16:m,uint32:A,uint64:k(8,r?T:B),int8:v,int16:E,int32:x,int64:k(8,r?I:S),float32:k(4,U),float64:k(8,P)}},e.readUint8=b;var a=r(204),c=r(43),f="undefined"!=typeof Map,u=!0;function h(t,e){var r,n={},i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n[i[r]]=o[r];return n}function l(t,e){var r,n=new Map,i=new Array(e),o=new Array(e),s=t.codec.decode;for(r=0;r<e;r++)i[r]=s(t),o[r]=s(t);for(r=0;r<e;r++)n.set(i[r],o[r]);return n}function d(t,e){for(var r=new Array(e),n=t.codec.decode,i=0;i<e;i++)r[i]=n(t);return r}function y(t,e){var r=t.reserve(e),n=r+e;return c.toString.call(t.buffer,"utf-8",r,n)}function p(t,e){var r=t.reserve(e),n=r+e,i=c.slice.call(t.buffer,r,n);return a.from(i)}function g(t,e){var r=t.reserve(e),n=r+e,i=c.slice.call(t.buffer,r,n);return a.Uint8Array.from(i).buffer}function w(t,e){var r=t.reserve(e+1),n=t.buffer[r++],i=r+e,o=t.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(c.slice.call(t.buffer,r,i))}function b(t){var e=t.reserve(1);return t.buffer[e]}function v(t){var e=t.reserve(1),r=t.buffer[e];return 128&r?r-256:r}function m(t){var e=t.reserve(2),r=t.buffer;return r[e++]<<8|r[e]}function E(t){var e=t.reserve(2),r=t.buffer,n=r[e++]<<8|r[e];return 32768&n?n-65536:n}function A(t){var e=t.reserve(4),r=t.buffer;return 16777216*r[e++]+(r[e++]<<16)+(r[e++]<<8)+r[e]}function x(t){var e=t.reserve(4),r=t.buffer;return r[e++]<<24|r[e++]<<16|r[e++]<<8|r[e]}function k(t,e){return function(r){var n=r.reserve(t);return e.call(r.buffer,n,u)}}function B(t){return new o(this,t).toNumber()}function S(t){return new s(this,t).toNumber()}function T(t){return new o(this,t)}function I(t){return new s(this,t)}function U(t){return n.read(this,t,!1,23,4)}function P(t){return n.read(this,t,!1,52,8)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r(44)})();